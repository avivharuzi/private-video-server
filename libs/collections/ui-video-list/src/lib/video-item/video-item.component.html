<div class="video-item">
  <div
    class="video-item__img-container"
    [routerLink]="['videos', video.id]"
    (mouseenter)="hasVideoPreview = true"
    (mouseleave)="hasVideoPreview = false"
  >
    <img
      [alt]="video.title"
      [src]="
        video.coverThumbnail || video.defaultThumbnail | stream: 'thumbnails'
      "
    />
    <div
      *ngIf="hasVideoPreview"
      class="video-item__img-container__video-preview"
    >
      <video autoplay loop playsinline>
        <source
          type="video/mp4"
          [src]="video.defaultPreview | stream: 'previews'"
        />
        Your browser does not support the video tag.
      </video>
    </div>
    <div
      class="video-item__img-container__play-icon"
      [class.video-item__img-container__play-icon--close]="hasVideoPreview"
    >
      <shared-icon name="play"></shared-icon>
    </div>
    <div
      class="video-item__img-container__video-info"
      [class.video-item__img-container__video-info--close]="hasVideoPreview"
    >
      <span class="video-item__img-container__video-info--quality">{{
        ([video.info.width, video.info.height] | sharedVideoQuality).name
      }}</span>
      <span class="video-item__img-container__video-info--duration">{{
        video.info.duration | sharedVideoDuration
      }}</span>
    </div>
  </div>
  <div class="video-item__title-and-actions">
    <h3>{{ video.title }}</h3>
    <div class="video-item__actions">
      <shared-action-menu #sharedActionMenu>
        <button
          iconName="more-vertical"
          shape="circle"
          sharedActionMenuOrigin
          sharedButton
          variant="text"
          [hasPadding]="false"
        ></button>

        <div sharedActionMenuDropdown>
          <shared-action-menu-list>
            <a
              target="_blank"
              [href]="video.id | stream: 'video'"
              (click)="sharedActionMenu.close()"
            >
              <shared-action-menu-item iconName="link"
                >Direct Stream</shared-action-menu-item
              >
            </a>
            <a
              target="_blank"
              [href]="video.id | stream: 'video-download'"
              (click)="sharedActionMenu.close()"
            >
              <shared-action-menu-item iconName="download"
                >Download</shared-action-menu-item
              >
            </a>
          </shared-action-menu-list>
        </div>
      </shared-action-menu>
    </div>
  </div>
</div>
